# Railway - Backend + PostgreSQL deploy ayarları
# https://docs.railway.app/reference/config-as-code

[build]
# Bağımlılıkları yükle (devDependencies dahil - migration için drizzle-kit gerekli)
buildCommand = "npm install --include=dev && npm run build"

[deploy]
# Migration'ı start'ta çalıştır (pre-deploy ayrı container'da DATABASE_URL/network sorun çıkarabiliyor)
startCommand = "npm run db:migrate && npm start"
